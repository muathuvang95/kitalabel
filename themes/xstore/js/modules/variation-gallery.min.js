!function(u){"use strict";etTheme.autoinit.variationGallery=etTheme.variationGallery=function(){var a,e,t,r,i=u(".variations_form"),l=0<u(i).length,n=i.data("product_id"),o=u(".images-wrapper").hasClass("swiper-vertical-images"),s=u(document).find(".quick-view-popup"),m=(s.length&&(i=s.find(".variations_form")),a=i,e=n,l&&wp.ajax.send("et_get_default_variation_gallery",{data:{product_id:e},success:function(i){u(a).data("et_variation_gallery_default",i),etTheme.global_image_lazy(),etTheme.resizeVideo(),setTimeout(function(){u(window).trigger("resize")},500)},error:function(i){u(a).data("et_variation_gallery_default",[]),etTheme.et_notice("variationGalleryNotAvailable","error"," "+e+".")}}),t=i,n=n,l&&wp.ajax.send("et_get_available_variation_images",{data:{product_id:n},success:function(i){u(t).data("et_variation_gallery_variation_images",r),!r||r.length<1?r=u(t).data("et_variation_gallery_default"):d(r)},error:function(i){u(t).data("et_variation_gallery_variation_images",[])}}),i.on("found_variation",function(i,a){if(1==a.variation_gallery_images.length)if(u(this).data("et_variation_gallery_default")&&1<=u(this).data("et_variation_gallery_default").length)if(u(this).data("et_variation_gallery_default")[0].url==a.variation_gallery_images[0].url)d(u(this).data("et_variation_gallery_default"));else{var e=u(document).find(".thumbnails-list .thumbnail-item").first().find("a");if(!e)return;a.image.url&&e.attr("href",a.image.url),a.image.src&&e.find("img").attr("src",a.image.src),a.image_srcset&&e.find("img").attr("srcset",a.image_srcset)}else d(a.variation_gallery_images);else d(a.variation_gallery_images);m(),u(document).trigger("variable_product_found_variation")}).on("reset_data",function(){u(this).data("et_variation_gallery_default")&&d(u(this).data("et_variation_gallery_default")),m(),u(document).trigger("variable_product_found_variation")}),function(){var i=u(".main-images").data("Swiper"),a=u(".thumbnails-list").data("Swiper");void 0!==i&&etTheme.swipers["swiper-"+index].slideTo(0),o?u(".thumbnails-list").slick("slickGoTo",0):void 0!==a&&etTheme.swipers["swiper-"+index].slideTo(0)});function d(i){var a;i&&l&&(a=i.map(function(i){return wp.template("et-variation-gallery-thumbnail-template")(i)}).join(""),u(".thumbnails-list").parent().removeClass("dt-hide mob-hide"),u(".swiper-control-top").find(".swiper-custom-left, .swiper-custom-right").removeClass("dt-hide mob-hide"),u(".thumbnails-list.vertical-thumbnails").find(".slick-arrow").remove(),u(".swiper-wrapper.thumbnails-list, .thumbnails-list.vertical-thumbnails .slick-track").html(a),i.length<=1&&(u(".swiper-wrapper.thumbnails-list").parent().addClass("dt-hide mob-hide"),u(".swiper-control-top").find(".swiper-custom-left, .swiper-custom-right").addClass("dt-hide mob-hide")),a=i.map(function(i){return wp.template("et-variation-gallery-slider-template")(i)}).join(""),u(".swiper-control-top .main-images").html(a),etTheme.global_image_lazy(),etTheme.resizeVideo(),setTimeout(function(){o&&(u(".thumbnails-list.vertical-thumbnails .slick-arrow").remove(),u(".thumbnails-list.vertical-thumbnails").slick("reinit"),u(".pswp-main-image img").on("load",function(){u(".thumbnails-list.vertical-thumbnails").slick("reinit")})),u(window).trigger("resize")},500),u.fn.zoom)&&!s.length&&wc_single_product_params.zoom_enabled&&u(".woocommerce-main-image").each(function(i,a){var e=u(a).width();u(a).find("img").data("large_image_width")>e&&(e=u.extend({touch:!1},wc_single_product_params.zoom_options),"ontouchstart"in document.documentElement?e.on="click":u(a).zoom(e))})}}}(jQuery);